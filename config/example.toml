# PolyTLS example config (TOML).

[proxy]
mode = "explicit"

[proxy.listen]
address = "127.0.0.1:8080"
backlog = 1024

[proxy.mitm]
enabled = true

[proxy.upstream]
# Default upstream TLS profile name used when the client does not provide
# `X-PolyTLS-Upstream-Profile`.
default_profile = "chrome-143-macos-arm64"
# Optional: override the upstream target (currently unused).
# default_upstream = "example.com:443"
#
# Additional PEM trust bundle used for proxyâ†’upstream TLS verification.
# ca_file = "./testdata/upstream-ca.pem"
#
# Lab-only: disable upstream certificate/hostname verification (like curl -k).
insecure_skip_verify = false

[proxy.certificate]
ca_key_path = "./ca/private.key"
ca_cert_path = "./ca/certificate.pem"
cache_ttl = 3600

# Optional upstream TLS ClientHello profiles (selectable per CONNECT request via
# `X-PolyTLS-Upstream-Profile: <profile-name>`).
[profiles."chrome-143-macos-arm64"]
permute_extensions = true
